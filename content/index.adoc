
[{invert}]
= Introduction au CI/CD
include::./attributes.adoc[]

[.title]
ENSG - Décembre 2020

[.small]
* Présentation disponible à l’adresse: {presentationUrl}[{presentationUrl}]
* Version PDF de la présentation : link:slides.pdf[+++<span class="far fa-file-pdf"></span>+++ Cliquez ici]
* This work is licensed under a Creative Commons Attribution 4.0 International License
* Code source de la présentation: link:{repositoryUrl}[+++<span class="fab fa-github"></span>+++ {repositoryUrl}]

image::qrcode.png["QRCode to this presentation",height=150]

== Comment utiliser cette présentation ?

* Pour naviguer, utilisez les flèches en bas à droite (ou celles de votre clavier)
** Gauche/Droite: changer de chapitre
** Haut/Bas: naviguer dans un chapitre
* Pour avoir une vue globale : utiliser la touche "o" (pour "*Overview*")
* Pour voir les notes de l'auteur : utilisez la touche "s" (pour "*Speaker* notes")

[{invert}]
== Bonjour !

[{invert}]
=== Damien DUPORTAL

* Freelancer
* Consultant @ link:https://www.ovh.com/fr/[OVHCloud]

* Me contacter :
** +++<span class="fa fa-envelope"></span>+++ damien.duportal+pro <chez> gmail.com
** link:https://www.linkedin.com/in/damien-duportal-ab70b524/[+++<span class="fab fa-linkedin"></span>+++ Damien Duportal,window=_blank]
** link:https://twitter.com/DamienDuportal[+++<span class="fab fa-twitter"></span>+++ @DamienDuportal,window=_blank]

[{invert}]
=== Julien LEVESY

* Señor Software Engineer @ link:https://www.upfluence.com/fr/[Upfluence]

* Me contacter :
** +++<span class="fa fa-envelope"></span>+++ jlevesy <chez> gmail.com
** link:https://www.linkedin.com/in/julien-levesy-5b80ab149/[+++<span class="fab fa-linkedin"></span>+++ Julien Levesy,window=_blank]
** link:https://twitter.com/jlevesy[+++<span class="fab fa-twitter"></span>+++ @jlevesy,window=_blank]
** link:https://github.com/jlevesy[+++<span class="fab fa-github"></span>+++ @jlevesy,window=_blank]

=== Et vous ?
[.left.text-center]
image::commitstrip.png[width="400"]

== Au Menu

1. De la feuille blanche au premier utilisateur.
2. Projet n°1: Site web de restaurant
3. Du premier utilisateur au prochain Netflix.
4. Projet n°2: Menus "as a service".

== Partie I: De la feuille blanche au premier utilisateur

Concrètement, ça veut dire quoi créer un logiciel ?

== Savoir ce que l'on veut faire!

[.notes]
--
* Créer un logiciel c'est écrire du code qui implémente une logique.
* Cette logique à pour but de répondre à un besoin.
* Il faut donc clarifier ce besoin.
--

=== Avant : le cycle en V

image::cycleenv.png[width="800"]

=== What went wrong here?

* On specifie et l'on engage un volume conséquent de travail sur des hypothèses
** ... et si les hypothèses sont fausses?
** ... et si les besoins changent?
* Cycle trèèèèès long
** Aucune validation à court terme
** Coût de l'erreur décuplé

[.notes]
--
* L'informatique manipule peu de concepts tangibles, il est très difficile de mener un travail de conception purement théorique à terme.
--

=== Comment éviter ça?

* Valider les hypothèses au plus tôt, et étendre petit à petit le périmètre fonctionel.
** Reduire le périmètre fonctionel au minimum.
** Confronter le logiciel au plus tôt aux utilisateurs.
** Refaire des hypothèses basées sur ce que l'on à appris, et recommencer!
* Accepter le changement.
** Votre première idée n'est probablement pas la bonne.
** Il est difficile, voire impossible, de prévoir comment votre logiciel va être utilisé.

[.notes]
--
* J'itère donc je suis.
* EMBRACE CHANGE
--

=== La clé : gérer le changement!

* Le changement ne doit pas être un évenement, ça doit être la norme.
* Notre objectif : minimiser le coût du changement.
* Faire en sorte que:
** Changer quelque chose soit facile
** Changer quelque chose soit rapide
** Changer quelque chose ne casse pas tout

=== Heureusement, vous avez des outils à disposition!

Et c'est ce que l'on va voir ensemble aujourd'hui!

[{invert}]
== Disclaimer: les outils c'est une chose, l'important c'est le problème derrière!
Soyez pragmatiques :)

[.notes]
--
* On va vous parler de beaucoup d'outils dans ce cours, ce sont des implémentations.
* Ce qui compte, c'est les problèmes qu'ils résolvent ;-)
--

== Changer du code

=== VCS: Tracer le changement

=== TODO: Slides sur git 101

=== TODO: Version

* Parlons version en général (tag, semantic versioning?).

=== Tests Automatisés

Faire en sorte qu'on ne casse pas tout...

=== Qu'est ce qu'un Test ?

* Çe sont des outils, soyez pragmatiques!
** Ça n'élimine pas les bugs, ça évite d'en introduire !
** Ça sert a prouver que le logiciel se comporte comme attendu a tout moment.
** Ça permet de détecter au plus tôt les problèmes.
* Il existe différent types de tests pour différents cas d'usages.

=== Test Unitaire

* Test validant le bon comportement une unité de code (fonction, méthode...)
* Prouve que l'unité de code interagit correctement avec ses collaborateurs
* Par exemple:
** Retourne les bonnes valeur en fonction des bons paramètres
** Appelle le bon type collaborateur avec les bons paramètres

=== Test Unitaire: Demonstration

=== Test Unitaire: Pro / Cons

* (+) Super rapides (<1s) et légers a executer
* (+) Pousse à avoir un bon design de code
* (+) Faible risque de "flackeyness"
* (+) Efficaces pour tester des cas limites
* (-) Potentiellement couteux à maintenir
* (-) Peu ancrés dans le réel

=== Test d'Integration

* Test validant qu'un assemblage d'unités se comportent comme prévu.
* Prouve le bon comportement d'une partie de l'application.
* Par exemple:
** Prouve que `GET /users` retourne la liste des utilisateurs en base
** Prouve que `POST /users`  avec un nom manquant provoque une réponse HTTP 400

=== Test d'Integration: Demonstration

=== Test d'Integration: Pro / Cons

* (+) Rapides (~1s) a executer
* (+) Assez proches d'un cas réel
* (-) Risque de "flackeyness"
* (-) Potentiellement complexes
* (-) Moins flexibles

=== Test de Bout en Bout

* Test validant qu'un cas d'utilisation est correctement implémenté par le logiciel
* Tests idéalement décrits de façon non technique
* Par exemple:
** En tant qu'un utilisateur authentifié
** Quand je remplis le formulare correctement et appuie sur le bouton "OK"
** Alors un utilisateur est créé en base

=== Demonstration

=== Test de Bout en Bout: Pro / Cons

* (+) Au plus proche d'un cas réel
* (+) Teste tous les composants du logiciel
* (-) Lents (~1m) et complexes
* (-) Haut risque de flackeyness :sob:
* (-) Peu flexibles

=== Quel type de test utiliser où ?

* ¯\_(ツ)_/¯
* Soyez pragmatiques :)

== Rendre son changement visible

=== Où votre code est visible?

* Où est executé le code?
* tél de Mme. Michu, Serveur, etc.
** Là où le logiciel s’exécute

=== C'est quoi rendre un changement visible?

* Présentation du pipeline de production logicielle.
* Dénominateur commun c'est la génération d’artefacts reproductibles

=== Comment rendre un changement visible?

* CI vs. CD
* Manuellement, tatata badaboum c'est pas bien cacaprout.
* Automatiquement, yay lalla c'est bien bien. Parlons CI CD, #satombebienonestlapourça.

[.notes]
--
* C'est couteux et compliqué de tout refaire a chaque fois => Automatisons alors.
--

== Projet n°1: Menus de la cantina de Tatooine

* Votre projet c'est de délivrer un site web d'un menu pour la Cantina de Tatoine, en ces temps de covid.
* Introduction a github et au github actions ?
* Votre production: netlify, creezvousuncomptetoussa.
* yaml yaml yaml
* Votre mission si vous l'acceptez: écrire un workflow github qui met en production un siteoueb a chaque fois qu'un changement est mergé sur main.

=== Les outils a votre disposition

=== VCS

Focus sur github

=== CI Engines

Focus sur GH Actions

=== Hébergements

Netlify, server web mutu, etc.

== Partie II: Du premier utilisateur au prochain Netflix

TODO

* Travailler en équipe, kesako?

== Projet n°2

* Same idea, except that we have an API to manage now.
* Your job should run tests, build a reproductible artifact, and publish to production as soon as you hit a tag.

== Sources

* link:http//www.wikipedia.fr[Wikipedia]

[{invert}]
== Merci !

* +++<span class="fa fa-envelope"></span>+++ damien.duportal+pro <chez> gmail.com
* link:https://twitter.com/DamienDuportal[+++<span class="fab fa-twitter"></span>+++ @DamienDuportal,window=_blank]
* +++<span class="fa fa-envelope"></span>+++ jlevesy <chez> gmail.com
* link:https://twitter.com/jlevesy[+++<span class="fab fa-twitter"></span>+++ @jlevesy,window=_blank]

[.small]
link:{presentationUrl}[Slides: {presentationUrl}]

image::qrcode.png["QRCode to this presentation",height=150]

[.small]
link:{repositoryUrl}[Source on +++<span class="fab fa-github"></span>+++: {repositoryUrl}]
